function drupal_init(){try{jDrupal||(jDrupal={}),jDrupal.csrf_token=!1,jDrupal.sessid=null,jDrupal.user=drupal_user_defaults(),jDrupal.settings={app_directory:"app",base_path:"/",cache:{entity:{enabled:!1,expiration:3600},views:{enabled:!1,expiration:3600}},debug:!1,endpoint:"",file_public_path:"sites/default/files",language_default:"und",site_path:""},jDrupal.includes={},jDrupal.includes.module={},jDrupal.modules={core:{},contrib:{},custom:{}},jDrupal.services_queue={comment:{retrieve:{}},file:{retrieve:{}},node:{retrieve:{}},taxonomy_term:{retrieve:{}},taxonomy_vocabulary:{retrieve:{}},user:{retrieve:{}}},jDrupal.cache_expiration=window.localStorage.getItem("cache_expiration"),jDrupal.cache_expiration?jDrupal.cache_expiration=JSON.parse(jDrupal.cache_expiration):jDrupal.cache_expiration={entities:{}}}catch(e){console.log("drupal_init - "+e)}}function date(e){try{var t=null,r=null;arguments[1]?(r=arguments[1],"string"==typeof r&&(r=parseInt(r)),t=new Date(r)):(t=new Date,r=t.getTime());for(var o="",n=!1,a=0;a<e.length;a++){var s=e.charAt(a);if(n)o+=s,n=!1;else switch(s){case"\\":n=!0;break;case"d":var c=""+t.getDate();1==c.length&&(c="0"+c),o+=c;break;case"D":var c=t.getDay();switch(c){case 0:o+="Sun";break;case 1:o+="Mon";break;case 2:o+="Tue";break;case 3:o+="Wed";break;case 4:o+="Thu";break;case 5:o+="Fri";break;case 6:o+="Sat"}break;case"j":o+=t.getDate();break;case"l":var c=t.getDay();switch(c){case 0:o+="Sunday";break;case 1:o+="Monday";break;case 2:o+="Tuesday";break;case 3:o+="Wednesday";break;case 4:o+="Thursday";break;case 5:o+="Friday";break;case 6:o+="Saturday"}break;case"N":o+=t.getDay()+1;break;case"w":o+=t.getDay();break;case"F":switch(t.getMonth()){case 0:o+="January";break;case 1:o+="February";break;case 2:o+="March";break;case 3:o+="April";break;case 4:o+="May";break;case 5:o+="June";break;case 6:o+="July";break;case 7:o+="August";break;case 8:o+="September";break;case 9:o+="October";break;case 10:o+="November";break;case 11:o+="December"}break;case"m":var i=""+(t.getMonth()+1);1==i.length&&(i="0"+i),o+=i;break;case"M":switch(t.getMonth()){case 0:o+="Jan";break;case 1:o+="Feb";break;case 2:o+="Mar";break;case 3:o+="Apr";break;case 4:o+="May";break;case 5:o+="Jun";break;case 6:o+="Jul";break;case 7:o+="Aug";break;case 8:o+="Sep";break;case 9:o+="Oct";break;case 10:o+="Nov";break;case 11:o+="Dec"}break;case"Y":o+=t.getFullYear();break;case"a":case"A":var l=t.getHours();o+=l<12?"am":"pm","A"==s&&(o=o.toUpperCase());break;case"g":var l=t.getHours();0==l||23==l?l=12:l%=12,o+=""+l;break;case"G":var l=""+t.getHours();o+=l;break;case"h":var l=""+t.getHours()%12;"0"==l?l="12":1==l.length&&(l="0"+l),o+=l;break;case"H":var l=""+t.getHours();1==l.length&&(l="0"+l),o+=l;break;case"i":var u=""+t.getMinutes();1==u.length&&(u="0"+u),o+=u;break;case"s":var _=""+t.getSeconds();1==_.length&&(_="0"+_),o+=_;break;default:o+=s}}return o}catch(e){console.log("date - "+e)}}function dpm(e){try{"undefined"!=typeof e?("function"==typeof parent.window.ripple?"undefined"!=typeof arguments[1]&&0==arguments[1]?console.log(JSON.stringify(e)):console.log(e):"object"==typeof e&&console.log(JSON.stringify(e)),""==e?console.log("<empty-string>"):console.log(e)):console.log("<undefined>")}catch(e){console.log("dpm - "+e)}}function drupal_user_defaults(){try{return{uid:"0",roles:{1:"anonymous user"},permissions:[]}}catch(e){console.log("drupal_user_defaults - "+e)}}function empty(e){try{return null===e||("object"==typeof e?0===Object.keys(e).length:"undefined"==typeof e||""==e)}catch(e){console.log("empty - "+e)}}function function_exists(name){try{return"function"==eval("typeof "+name)}catch(e){alert("function_exists - "+e)}}function http_status_code_title(e){try{var t="";switch(e){case 200:t="OK";break;case 401:t="Unauthorized";break;case 404:t="Not Found";break;case 406:t="Not Acceptable";break;case 500:t="Internal Server Error"}return t}catch(e){console.log("http_status_code_title - "+e)}}function in_array(e,t){try{if("undefined"==typeof t)return!1;if("string"==typeof e)return t.indexOf(e)>-1;for(var r=!1,o=0;o<t.length;o++)if(t[o]==e){r=!0;break}return r}catch(e){console.log("in_array - "+e)}}function is_array(e){return"[object Array]"===Object.prototype.toString.call(e)}function is_int(e){return"string"==typeof e&&(e=parseInt(e)),"number"==typeof e&&e%1==0}function language_default(){try{return jDrupal.settings.language_default&&""!=jDrupal.settings.language_default?jDrupal.settings.language_default:"und"}catch(e){console.log("language_default - "+e)}}function module_exists(e){try{var t=!1;return"undefined"!=typeof jDrupal.modules.core[e]?t=!0:"undefined"!=typeof jDrupal.modules.contrib[e]?t=!0:"undefined"!=typeof jDrupal.modules.custom[e]&&(t=!0),t}catch(e){console.log("module_exists - "+e)}}function shuffle(e){try{for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[r],e[r]=o}return e}catch(e){console.log("shuffle - "+e)}}function time(){var e=new Date;return Math.floor(e/1e3)}function ucfirst(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function module_implements(e){try{var t=[];if(e)for(var r=module_types(),o=0;o<r.length;o++){var n=r[o];for(var a in jDrupal.modules[n])jDrupal.modules[n].hasOwnProperty(a)&&function_exists(a+"_"+e)&&t.push(a)}return 0!=t.length&&t}catch(e){console.log("module_implements - "+e)}}function module_invoke(e,t){try{var r=null;if(module_load(e)){var o=Array.prototype.slice.call(arguments),n=e+"_"+t;if(function_exists(n)){var a=window[n];o.splice(0,2),r=0==Object.getOwnPropertyNames(o).length?a():a.apply(null,o)}}else console.log("WARNING: module_invoke() - Failed to load module: "+e);return r}catch(e){console.log("module_invoke - "+e)}}function module_invoke_all(e){try{module_invoke_results=new Array;var t=Array.prototype.slice.call(arguments);t.splice(0,1),module_invoke_continue=!0;for(var r=module_types(),o=0;o<r.length;o++){var n=r[o];for(var a in jDrupal.modules[n])if(jDrupal.modules[n].hasOwnProperty(a)){var s=a+"_"+e;if(function_exists(s)){var c=null;if(0==t.length)c=module_invoke(a,e);else{t.unshift(a,e);var i=window.module_invoke;c=i.apply(null,t),t.splice(0,2)}"undefined"!=typeof c&&module_invoke_results.push(c)}}}return module_invoke_results}catch(e){console.log("module_invoke_all - "+e)}}function module_load(e){try{for(var t=module_types(),r=0;r<t.length;r++){var o=t[r];if(jDrupal.modules[o][e])return jDrupal.modules[o][e]}return!1}catch(e){console.log("module_load - "+e)}}function module_object_template(e){try{return{name:e}}catch(e){console.log("module_object_template - "+e)}}function module_types(){try{return["core","contrib","custom"]}catch(e){console.log("module_types - "+e)}}function comment_load(e,t){try{entity_load("comment",e,t)}catch(e){console.log("comment_load - "+e)}}function comment_save(e,t){try{entity_save("comment",null,e,t)}catch(e){console.log("comment_save - "+e)}}function services_entity_types(){var e=[];if(jDrupal.services_entity&&jDrupal.services_entity.types)for(var t in jDrupal.services_entity.types)jDrupal.services_entity.types.hasOwnProperty(t)&&e.push(t);return e}function _services_entity_queue_init(){for(var e in jDrupal.services_entity.types)jDrupal.services_entity.types.hasOwnProperty(e)&&(jDrupal.services_queue[e]||(jDrupal.services_queue[e]={retrieve:{}}))}function entity_get_bundle(e,t){try{var r=null;switch(e){case"node":r=t.type;break;case"taxonomy_term":r=t.vid;break;case"comment":case"file":case"user":case"taxonomy_vocabulary":break;default:if(in_array(e,services_entity_types()))return t.type;var o="WARNING: entity_get_bundle - unsupported entity type ("+e+")";console.log(o)}return r}catch(e){console.log("entity_get_bundle - "+e)}}function entity_get_bundle_name(e){switch(e){case"node":return"type";case"taxonomy_term":return"vid";case"comment":case"file":case"user":case"taxonomy_vocabulary":default:return in_array(e,services_entity_types())?"type":null}}function entity_id_parse(e){return"string"==typeof e?parseInt(e):e}function entity_local_storage_key(e,t){return e+"_"+t}function entity_index_local_storage_key(e){return e}function entity_load(e,t,r){var o=in_array(e,services_entity_types());if(o&&_services_entity_queue_init(),is_array(t)){var n={parameters:{},options:{entity_load:!0}};return n.parameters[entity_primary_key(e)]=t.join(","),void window[e+"_index"](n,r)}var a=t;a=entity_id_parse(a);var s=entity_caching_enabled(e);if(_services_queue_already_queued(e,"retrieve",a,"success"))return s&&(c=_entity_local_storage_load(e,a,r))?void(r.success&&r.success(c)):("undefined"!=typeof r.success&&_services_queue_callback_add(e,"retrieve",a,"success",r.success),void("undefined"!=typeof r.error&&_services_queue_callback_add(e,"retrieve",a,"error",r.error)));_services_queue_add_to_queue(e,"retrieve",a),_services_queue_callback_add(e,"retrieve",a,"success",r.success);var c=!1;if(s&&(c=_entity_local_storage_load(e,a,r)))return void _entity_callback_bubble(e,a,c);if(!in_array(e,entity_types())){var i="WARNING: entity_load - unsupported type: "+e;return console.log(i),void(r.error&&r.error(null,null,i))}var l=entity_primary_key(e),u={success:function(t){c=t,entity_caching_enabled(e,entity_get_bundle(e,c))&&(_entity_set_expiration_time(e,c),_entity_local_storage_save(e,a,c)),_entity_callback_bubble(e,a,c)},error:function(t,o,n){try{_services_queue_clear(e,"retrieve",a,"success"),r.error&&r.error(t,o,n)}catch(e){console.log("entity_load - error - "+e)}}},_=o?"entity_retrieve":e+"_retrieve";if(function_exists(_)){u[l]=a;var y=window[_];o?(services_resource_defaults(u,e,"retrieve"),y(e,t,u)):y(t,u)}else console.log("WARNING: "+_+"() does not exist!")}function _entity_callback_bubble(e,t,r){for(var o=jDrupal.services_queue[e].retrieve[t].success,n=0;n<o.length;n++)o[n](r);_services_queue_clear(e,"retrieve",t,"success")}function _entity_local_storage_load(e,t,r){try{var o=!1;r&&r.reset&&_entity_local_storage_delete(e,t);var n=entity_local_storage_key(e,t);if(o=window.localStorage.getItem(n))if(o=JSON.parse(o),entity_has_expired(e,o))_entity_local_storage_delete(e,t),o=!1;else if(drupalgap&&drupalgap.page.options&&drupalgap.page.options.reloadingPage){if("undefined"!=typeof drupalgap.page.options.reset&&drupalgap.page.options.reset===!1)return o;_entity_local_storage_delete(e,t),o=!1}return o}catch(e){console.log("_entity_local_storage_load - "+e)}}function _entity_local_storage_save(e,t,r){try{var o=entity_local_storage_key(e,t);window.localStorage.setItem(o,JSON.stringify(r)),"undefined"==typeof jDrupal.cache_expiration.entities&&(jDrupal.cache_expiration.entities={}),jDrupal.cache_expiration.entities[o]=r.expiration,window.localStorage.setItem("cache_expiration",JSON.stringify(jDrupal.cache_expiration))}catch(e){console.log("_entity_local_storage_save - "+e)}}function _entity_local_storage_delete(e,t){try{var r=entity_local_storage_key(e,t);window.localStorage.removeItem(r)}catch(e){console.log("_entity_local_storage_delete - "+e)}}function entity_primary_key(e){try{var t;switch(e){case"comment":t="cid";break;case"file":t="fid";break;case"node":t="nid";break;case"taxonomy_term":t="tid";break;case"taxonomy_vocabulary":t="vid";break;case"user":t="uid";break;default:if(in_array(e,services_entity_types()))return"id";var r=e+"_primary_key";if(function_exists(r)){var o=window[r];t=o(e)}else{var n="entity_primary_key - unsupported entity type ("+e+") - to add support, declare "+r+"() and have it return the primary key column name as a string";console.log(n)}}return t}catch(e){console.log("entity_primary_key - "+e)}}function entity_save(e,t,r,o){try{var n;switch(e){case"comment":n=r.cid?"comment_update":"comment_create";break;case"file":n="file_create";break;case"node":r.language||(r.language=language_default()),n=r.nid?"node_update":"node_create";break;case"user":n=r.uid?"user_update":"user_create";break;case"taxonomy_term":n=r.tid?"taxonomy_term_update":"taxonomy_term_create";break;case"taxonomy_vocabulary":n=r.vid?"taxonomy_vocabulary_update":"taxonomy_vocabulary_create";break;default:if(in_array(e,services_entity_types()))return n=r[entity_primary_key(e)]?"entity_update":"entity_create",void window[n](e,t,r,o)}if(n&&function_exists(n)){var a=window[n];a(r,o)}else console.log("WARNING: entity_save - unsupported type: "+e)}catch(e){console.log("entity_save - "+e)}}function entity_caching_enabled(){try{if("undefined"==typeof jDrupal.settings.cache||"undefined"==typeof jDrupal.settings.cache.entity||!jDrupal.settings.cache.entity.enabled)return!1;var e=arguments[0];if(!e)return!0;if(!jDrupal.settings.cache.entity.entity_types||!jDrupal.settings.cache.entity.entity_types[e])return!0;var t=jDrupal.settings.cache.entity.entity_types[e],r="undefined"!=typeof t.enabled&&t.enabled===!1;if(r)return!1;var o=arguments[1];return!o||("undefined"==typeof t.bundles||"undefined"==typeof t.bundles[o]||("undefined"!=typeof t.bundles[o].enabled?t.bundles[o].enabled:t.enabled))}catch(e){console.log("entity_caching_enabled - "+e)}}function entity_has_expired(e,t){return"undefined"!=typeof t.expiration&&0!=t.expiration&&time()>t.expiration}function entity_clean_local_storage(){if(jDrupal.cache_expiration.entities)for(var e in jDrupal.cache_expiration.entities)if(jDrupal.cache_expiration.entities.hasOwnProperty(e)){var t=jDrupal.cache_expiration.entities[e];if(!(t>time())){delete jDrupal.cache_expiration.entities[e];var r=e.split("_"),o=r[0],n=r[1];_entity_local_storage_delete(o,n),window.localStorage.setItem("cache_expiration",JSON.stringify(jDrupal.cache_expiration))}}}function _entity_get_expiration_time(e,t){try{var r=null,o=entity_get_bundle(e,t);if(entity_caching_enabled(e,o)){var r=0,n=jDrupal.settings.cache;"undefined"!==n.entity.expiration&&(r=n.entity.expiration),"undefined"!==n.entity.entity_types&&(n.entity.entity_types[e]&&"undefined"!=typeof n.entity.entity_types[e].expiration&&(r=n.entity.entity_types[e].expiration),o&&n.entity.entity_types[e]&&n.entity.entity_types[e].bundles&&n.entity.entity_types[e].bundles[o]&&"undefined"!=typeof n.entity.entity_types[e].bundles[o].expiration&&(r=n.entity.entity_types[e].bundles[o].expiration))}return r&&(r+=time()),r}catch(e){console.log("_entity_get_expiration_time - "+e)}}function _entity_set_expiration_time(e,t){try{t.expiration=_entity_get_expiration_time(e,t)}catch(e){console.log("_entity_set_expiration_time - "+e)}}function entity_types(){var e=["comment","file","node","taxonomy_term","taxonomy_vocabulary","user"],t=services_entity_types();return t.length&&e.push.apply(e,t),e}function _entity_index_local_storage_load(e,t,r){try{var o=!1;r&&r.reset&&_entity_index_local_storage_delete(t);var n=entity_index_local_storage_key(t);if(o=window.localStorage.getItem(n))if(o=JSON.parse(o),"undefined"!=typeof o.expiration&&0!=o.expiration&&time()>o.expiration)_entity_index_local_storage_delete(t),o=!1;else{for(var a=[],s=0;s<o.entity_ids.length;s++)a.push(_entity_local_storage_load(e,o.entity_ids[s],r));o=a}return o}catch(e){console.log("_entity_index_local_storage_load - "+e)}}function _entity_index_local_storage_save(e,t,r){try{for(var o={entity_type:e,expiration:_entity_get_expiration_time(),entity_ids:[]},n=0;n<r.length;n++)o.entity_ids.push(r[n][entity_primary_key(e)]);window.localStorage.setItem(entity_index_local_storage_key(t),JSON.stringify(o))}catch(e){console.log("_entity_index_local_storage_save - "+e)}}function _entity_index_local_storage_delete(e){try{var t=entity_index_local_storage_key(e);window.localStorage.removeItem(t)}catch(e){console.log("_entity_index_local_storage_delete - "+e)}}function file_load(e,t){try{entity_load("file",e,t)}catch(e){console.log("file_load - "+e)}}function file_save(e,t){try{entity_save("file",null,e,t)}catch(e){console.log("file_save - "+e)}}function node_load(e,t){try{entity_load("node",e,t)}catch(e){console.log("node_load - "+e)}}function node_save(e,t){try{entity_save("node",e.type,e,t)}catch(e){console.log("node_save - "+e)}}function taxonomy_term_load(e,t){try{entity_load("taxonomy_term",e,t)}catch(e){console.log("taxonomy_term_load - "+e)}}function taxonomy_term_save(e,t){try{entity_save("taxonomy_term",null,e,t)}catch(e){console.log("taxonomy_term_save - "+e)}}function taxonomy_vocabulary_load(e,t){try{entity_load("taxonomy_vocabulary",e,t)}catch(e){console.log("taxonomy_vocabulary_load - "+e)}}function taxonomy_vocabulary_save(e,t){try{entity_save("taxonomy_vocabulary",null,e,t)}catch(e){console.log("taxonomy_vocabulary_save - "+e)}}function user_load(e,t){try{entity_load("user",e,t)}catch(e){console.log("user_load - "+e)}}function user_save(e,t){try{entity_save("user",null,e,t)}catch(e){console.log("user_save - "+e)}}function user_password(){try{var e=10;arguments[0]&&(e=arguments[0]);for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz23456789",o=0;o<e;o++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}catch(e){console.log("user_password - "+e)}}function services_get_csrf_token(e){var t;if(e.reset&&(jDrupal.sessid=null),jDrupal.sessid&&(t=jDrupal.sessid),t)return void(e.success&&e.success(t));var r=new XMLHttpRequest;e.token_url=jDrupal.settings.site_path+jDrupal.settings.base_path+"?q=services/session/token",module_invoke_all("csrf_token_preprocess",e),r.onreadystatechange=function(){4==r.readyState&&0==r.status&&e.error&&e.error(r,0,"xhr network status problem for csrf token")},r.onload=function(o){if(4==r.readyState){r.status+" - "+http_status_code_title(r.status);200!=r.status?e.error&&e.error(r,r.status,r.responseText):(t=r.responseText.trim(),jDrupal.sessid=t,e.success&&e.success(t))}else console.log("services_get_csrf_token - readyState - "+r.readyState)},r.open("GET",e.token_url,!0),r.send(null)}function services_ready(){var e=!0;return""==jDrupal.settings.site_path&&(e=!1,console.log("jDrupal's jDrupal.settings.site_path is not set!")),""==jDrupal.settings.endpoint&&(e=!1,console.log("jDrupal's jDrupal.settings.endpoint is not set!")),e}function services_resource_defaults(e,t,r){e.service||(e.service=t),e.resource||(e.resource=r)}function _services_queue_already_queued(e,t,r,o){var n=!1;if("undefined"!=typeof jDrupal.services_queue[e][t][r]){var a=jDrupal.services_queue[e][t][r];0!=a[o].length&&(n=!0)}return n}function _services_queue_add_to_queue(e,t,r){jDrupal.services_queue[e][t][r]={entity_id:r,success:[],error:[]}}function _services_queue_clear(e,t,r,o){jDrupal.services_queue[e].retrieve[r][o]=[]}function _services_queue_remove_from_queue(e,t,r){console.log("WARNING: services_queue_remove_from_queue() not done yet!")}function _services_queue_callback_add(e,t,r,o,n){jDrupal.services_queue[e][t][r][o].push(n)}function _services_queue_callback_count(e,t,r,o){var n=jDrupal.services_queue[e][t][r][o].length;return n}function comment_create(e,t){try{services_resource_defaults(t,"comment","create"),entity_create("comment",null,e,t)}catch(e){console.log("comment_create - "+e)}}function comment_retrieve(e,t){try{services_resource_defaults(t,"comment","retrieve"),entity_retrieve("comment",e,t)}catch(e){console.log("comment_retrieve - "+e)}}function comment_update(e,t){try{services_resource_defaults(t,"comment","update"),entity_update("comment",null,e,t)}catch(e){console.log("comment_update - "+e)}}function comment_delete(e,t){try{services_resource_defaults(t,"comment","delete"),entity_delete("comment",e,t)}catch(e){console.log("comment_delete - "+e)}}function comment_index(e,t){try{services_resource_defaults(t,"comment","index"),entity_index("comment",e,t)}catch(e){console.log("comment_index - "+e)}}function entity_create(e,t,r,o){try{var n=e+".json";in_array(e,services_entity_types())&&(n="entity_"+n),jDrupal.services.call({method:"POST",async:o.async,path:n,service:o.service,resource:o.resource,entity_type:e,bundle:t,data:JSON.stringify(r),success:function(e){try{o.success&&o.success(e)}catch(e){console.log("entity_create - success - "+e)}},error:function(e,t,r){try{o.error&&o.error(e,t,r)}catch(e){console.log("entity_create - error - "+e)}}})}catch(e){console.log("entity_create - "+e)}}function entity_retrieve(e,t,r){var o=e+"/"+t+".json";in_array(e,services_entity_types())&&(o="entity_"+o),jDrupal.services.call({method:"GET",path:o,service:r.service,resource:r.resource,entity_type:e,entity_id:t,success:function(e){r.success&&r.success(e)},error:function(e,t,o){r.error&&r.error(e,t,o)}})}function entity_update(e,t,r,o){try{var n=entity_primary_key(e),a=e+"/"+r[n]+".json";in_array(e,services_entity_types())?(a="entity_"+a,data=r):data=_entity_wrap(e,r),jDrupal.services.call({method:"PUT",path:a,service:o.service,resource:o.resource,entity_type:e,entity_id:r[entity_primary_key(e)],bundle:t,data:JSON.stringify(data),success:function(t){try{_entity_local_storage_delete(e,r[n]),o.success&&o.success(t)}catch(e){console.log("entity_update - success - "+e)}},error:function(e,t,r){try{o.error&&o.error(e,t,r)}catch(e){console.log("entity_update - error - "+e)}}})}catch(e){console.log("entity_update - "+e)}}function entity_delete(e,t,r){try{var o=e+"/"+t+".json";in_array(e,services_entity_types())&&(o="entity_"+o),jDrupal.services.call({method:"DELETE",path:o,service:r.service,resource:r.resource,entity_type:e,entity_id:t,success:function(o){try{_entity_local_storage_delete(e,t),r.success&&r.success(o)}catch(e){console.log("entity_delete - success - "+e)}},error:function(e,t,o){try{r.error&&r.error(e,t,o)}catch(e){console.log("entity_delete - error - "+e)}}})}catch(e){console.log("entity_delete - "+e)}}function entity_index(e,t,r){try{var o;"object"==typeof t?o=entity_index_build_query_string(t):"string"==typeof t&&(o=t),o=o?"&"+o:"";var n=e+".json"+o;in_array(e,services_entity_types())&&(n="entity_"+n);var a=entity_caching_enabled(e);if(a){var s=_entity_index_local_storage_load(e,n,{});if(s&&r.success)return void r.success(s)}jDrupal.services.call({method:"GET",path:n,service:r.service,resource:r.resource,entity_type:e,query:t,success:function(o){try{if(r.success){if(a&&t.options&&t.options.entity_load){for(var s=0;s<o.length;s++){var c=o[s];_entity_set_expiration_time(c),_entity_local_storage_save(e,o[s][entity_primary_key(e)],c)}_entity_index_local_storage_save(e,n,o)}r.success(o)}}catch(e){console.log("entity_index - success - "+e)}},error:function(e,t,o){try{r.error&&r.error(e,t,o)}catch(e){console.log("entity_index - error - "+e)}}})}catch(e){console.log("entity_index - "+e)}}function entity_index_build_query_string(e){try{var t="";if(!e)return t;if(e.fields){for(var r="",o=0;o<e.fields.length;o++)r+=encodeURIComponent(e.fields[o])+",";""!=r&&(r="fields="+r.substring(0,r.length-1),t+=r+"&")}if(e.parameters){var n="";for(var a in e.parameters)if(e.parameters.hasOwnProperty(a)){var s=encodeURIComponent(a),c=encodeURIComponent(e.parameters[a]);n+="parameters["+s+"]="+c+"&"}""!=n&&(n=n.substring(0,n.length-1),t+=n+"&")}if(e.parameters_op){var i="";for(var l in e.parameters_op)if(e.parameters_op.hasOwnProperty(l)){var s=encodeURIComponent(l),c=encodeURIComponent(e.parameters_op[l]);i+="parameters_op["+s+"]="+c+"&",i+="options[parameters_op]["+s+"]="+c+"&"}""!=i&&(i=i.substring(0,i.length-1),t+=i+"&")}if(e.orderby){var u="";for(var _ in e.orderby)if(e.orderby.hasOwnProperty(_)){var s=encodeURIComponent(_),c=encodeURIComponent(e.orderby[_]);u+="orderby["+s+"]="+c+"&",u+="options[orderby]["+s+"]="+c+"&"}""!=u&&(u=u.substring(0,u.length-1),t+=u+"&")}if(e.options){var y="";for(var d in e.options)if(e.options.hasOwnProperty(d)){var p=e.options[d];if("object"==typeof p){for(var _ in p)if(p.hasOwnProperty(_)){var s=encodeURIComponent(_),c=encodeURIComponent(p[_]);y+="options["+d+"]["+s+"]="+c+"&"}}else{var c=encodeURIComponent(p);y+="options["+d+"]="+c+"&"}}""!=y&&(y=y.substring(0,y.length-1),t+=y+"&")}if("undefined"!=typeof e.page&&(t+="page="+encodeURIComponent(e.page)+"&"),"undefined"!=typeof e.page_size){var f="WARNING query.page_size is deprecated, use query.pagesize instead!";console.log(f),t+="pagesize="+encodeURIComponent(e.page_size)+"&"}else"undefined"!=typeof e.pagesize&&(t+="pagesize="+encodeURIComponent(e.pagesize)+"&");return t.substring(0,t.length-1)}catch(e){console.log("entity_index_build_query_string - "+e)}}function _entity_wrap(e,t){try{var r={};return"comment"==e||"taxonomy_term"==e||"taxonomy_vocabulary"==e||"user"==e||e.indexOf("commerce")!=-1?r=t:r[e]=t,r}catch(e){console.log("_entity_wrap - "+e)}}function file_create(e,t){try{services_resource_defaults(t,"file","create"),entity_create("file",null,e,t)}catch(e){console.log("file_create - "+e)}}function file_retrieve(e,t){try{services_resource_defaults(t,"file","retrieve"),entity_retrieve("file",e,t)}catch(e){console.log("file_retrieve - "+e)}}function file_delete(e,t){try{services_resource_defaults(t,"file","delete"),entity_delete("file",e,t)}catch(e){console.log("file_delete - "+e)}}function node_create(e,t){try{services_resource_defaults(t,"node","create"),entity_create("node",e.type,e,t)}catch(e){console.log("node_create - "+e)}}function node_retrieve(e,t){try{services_resource_defaults(t,"node","retrieve"),entity_retrieve("node",e,t)}catch(e){console.log("node_retrieve - "+e)}}function node_update(e,t){try{services_resource_defaults(t,"node","update"),entity_update("node",e.type,e,t)}catch(e){console.log("node_update - "+e)}}function node_delete(e,t){try{services_resource_defaults(t,"node","delete"),entity_delete("node",e,t)}catch(e){console.log("node_delete - "+e)}}function node_index(e,t){try{services_resource_defaults(t,"node","index"),entity_index("node",e,t)}catch(e){console.log("node_index - "+e)}}function system_connect(e){var t={service:"system",resource:"connect",method:"POST",path:"system/connect.json",success:function(t){try{jDrupal.user=t.user,e.success&&e.success(t)}catch(e){console.log(e.stack),console.log("system_connect - success - "+e)}},error:function(t,r,o){try{e.error&&e.error(t,r,o)}catch(e){console.log("system_connect - error - "+e)}}};jDrupal.csrf_token?(e.debug&&console.log("Token already available."),jDrupal.services.call(t)):services_get_csrf_token({success:function(r){e.debug&&console.log("Grabbed new token."),jDrupal.csrf_token=!0,jDrupal.services.call(t)},error:function(t,r,o){e.error&&e.error(t,r,o)}})}function taxonomy_term_create(e,t){try{services_resource_defaults(t,"taxonomy_term","create"),entity_create("taxonomy_term",null,e,t)}catch(e){console.log("taxonomy_term_create - "+e)}}function taxonomy_term_retrieve(e,t){try{services_resource_defaults(t,"taxonomy_term","retrieve"),entity_retrieve("taxonomy_term",e,t)}catch(e){console.log("taxonomy_term_retrieve - "+e)}}function taxonomy_term_update(e,t){try{services_resource_defaults(t,"taxonomy_term","update"),entity_update("taxonomy_term",null,e,t)}catch(e){console.log("taxonomy_term_update - "+e)}}function taxonomy_term_delete(e,t){try{services_resource_defaults(t,"taxonomy_term","delete"),entity_delete("taxonomy_term",e,t)}catch(e){console.log("taxonomy_term_delete - "+e)}}function taxonomy_term_index(e,t){try{services_resource_defaults(t,"taxonomy_term","index"),entity_index("taxonomy_term",e,t)}catch(e){console.log("taxonomy_term_index - "+e)}}function taxonomy_vocabulary_create(e,t){try{!e.machine_name&&e.name&&(e.machine_name=e.name.toLowerCase().replace(" ","_")),services_resource_defaults(t,"taxonomy_vocabulary","create"),entity_create("taxonomy_vocabulary",null,e,t)}catch(e){console.log("taxonomy_vocabulary_create - "+e)}}function taxonomy_vocabulary_retrieve(e,t){try{services_resource_defaults(t,"taxonomy_vocabulary","retrieve"),entity_retrieve("taxonomy_vocabulary",e,t)}catch(e){console.log("taxonomy_vocabulary_retrieve - "+e)}}function taxonomy_vocabulary_update(e,t){try{if(!e.machine_name||""==e.machine_name){var r="taxonomy_vocabulary_update - missing machine_name";return console.log(r),void(t.error&&t.error(null,406,r))}services_resource_defaults(t,"taxonomy_vocabulary","update"),entity_update("taxonomy_vocabulary",null,e,t)}catch(e){console.log("taxonomy_vocabulary_update - "+e)}}function taxonomy_vocabulary_delete(e,t){try{services_resource_defaults(t,"taxonomy_vocabulary","delete"),entity_delete("taxonomy_vocabulary",e,t)}catch(e){console.log("taxonomy_vocabulary_delete - "+e)}}function taxonomy_vocabulary_index(e,t){try{services_resource_defaults(t,"taxonomy_vocabulary","index"),entity_index("taxonomy_vocabulary",e,t)}catch(e){console.log("taxonomy_vocabulary_index - "+e)}}function taxonomy_get_tree(e,t,r,o,n){try{var t=arguments[1]?arguments[1]:0,r=arguments[2]?arguments[2]:null,o=!!arguments[3]&&arguments[3];n.method="POST",n.path="taxonomy_vocabulary/getTree.json",n.service="taxonomy_vocabulary",n.resource="get_tree",n.data=JSON.stringify({vid:e,parent:t,max_depth:r,load_entities:o}),jDrupal.services.call(n)}catch(e){console.log("taxonomy_get_tree - "+e)}}function user_create(e,t){try{services_resource_defaults(t,"user","create"),entity_create("user",null,e,t)}catch(e){console.log("user_create - "+e)}}function user_retrieve(e,t){try{services_resource_defaults(t,"user","retrieve"),entity_retrieve("user",e,t)}catch(e){console.log("user_retrieve - "+e)}}function user_update(e,t){try{var r="create";e.uid&&(r="update"),services_resource_defaults(t,"user",r),entity_update("user",null,e,t)}catch(e){console.log("user_update - "+e)}}function user_delete(e,t){try{services_resource_defaults(t,"user","create"),entity_delete("user",e,t)}catch(e){console.log("user_delete - "+e)}}function user_index(e,t){try{services_resource_defaults(t,"user","create"),entity_index("user",e,t)}catch(e){console.log("user_index - "+e)}}function user_register(e,t){try{jDrupal.services.call({service:"user",resource:"register",method:"POST",path:"user/register.json",data:JSON.stringify(e),success:function(e){try{t.success&&t.success(e)}catch(e){console.log("user_register - success - "+e)}},error:function(e,r,o){try{t.error&&t.error(e,r,o)}catch(e){console.log("user_register - error - "+e)}}})}catch(e){console.log("user_retrieve - "+e)}}function user_login(e,t,r){try{var o=!0;if(e&&"string"==typeof e||(o=!1,console.log("user_login - invalid name")),t&&"string"==typeof t||(o=!1,console.log("user_login - invalid pass")),!o)return void(r.error&&r.error(null,406,"user_login - bad input"));jDrupal.services.call({service:"user",resource:"login",method:"POST",path:"user/login.json",data:"username="+encodeURIComponent(e)+"&password="+encodeURIComponent(t),success:function(e){try{jDrupal.user=e.user,jDrupal.sessid=null,services_get_csrf_token({success:function(t){try{r.success&&system_connect({success:function(t){try{r.success&&r.success(e)}catch(e){console.log("user_login - system_connect - success - "+e)}},error:function(e,t,o){try{r.error&&r.error(e,t,o)}catch(e){console.log("user_login - system_connect - error - "+e)}}})}catch(e){console.log("user_login - services_get_csrf_token - success - "+e)}},error:function(e,t,o){console.log("user_login - services_get_csrf_token - error - "+o),r.error&&r.error(e,t,o)}})}catch(e){console.log("user_login - success - "+e)}},error:function(e,t,o){try{r.error&&r.error(e,t,o)}catch(e){console.log("user_login - error - "+e)}}})}catch(e){console.log("user_login - "+e)}}function user_logout(e){try{jDrupal.services.call({service:"user",resource:"logout",method:"POST",path:"user/logout.json",success:function(t){try{jDrupal.user=drupal_user_defaults(),jDrupal.sessid=null,system_connect({success:function(r){try{e.success&&e.success(t)}catch(e){console.log("user_logout - system_connect - success - "+e)}},error:function(t,r,o){try{e.error&&e.error(t,r,o)}catch(e){console.log("user_logout - system_connect - error - "+e)}}})}catch(e){console.log("user_logout - success - "+e)}},error:function(t,r,o){try{e.error&&e.error(t,r,o)}catch(e){console.log("user_logout - error - "+e)}}})}catch(e){console.log("user_login - "+e)}}function user_request_new_password(e,t){try{"undefined"==typeof t.data&&(t.data={}),t.data.name=e,t.data=JSON.stringify(t.data),t.method="POST",t.path="user/request_new_password.json",t.service="user",t.resource="request_new_password",jDrupal.services.call(t)}catch(e){console.log("user_request_new_password - "+e)}}var jDrupal={};
if(drupal_init(),!Drupal)var Drupal=jDrupal;var module_invoke_results=null,module_invoke_continue=null;jDrupal.fieldHasItem=function(e,t,r,o){return r||(r=language_default()),"undefined"==typeof o&&(o=0),e[t]&&e[t][r]&&e[t][r].length&&e[t][r][o]},jDrupal.fieldGetItem=function(e,t,r,o){return r||(r=language_default()),"undefined"==typeof o&&(o=0),e[t][r][o]},jDrupal.fieldGetItemCount=function(e,t,r){return r?jDrupal.fieldGetItems(e,t,r).length:jDrupal.fieldGetItems(e,t).length},jDrupal.fieldGetItems=function(e,t,r){return r||(r=language_default()),e[t][r]},jDrupal.fieldSetItem=function(e,t,r,o,n,a){n||(n=language_default()),"undefined"==typeof a&&(a=0),e[t]||(e[t]={}),r?(e[t][n]||(e[t][n]=[]),e[t][n][a]||(e[t][n][a]={}),e[t][n][a][r]=o):e[t][n][a]=o},jDrupal.services={},jDrupal.services.call=function(e){if(e.debug=!1,!services_ready()){var t="Set the site_path and endpoint on jDrupal.settings!";return void e.error(null,null,t)}module_invoke_all("services_preprocess",e);var r=new XMLHttpRequest,o=jDrupal.settings.site_path+jDrupal.settings.base_path+"?q=";"undefined"==typeof e.endpoint?o+=jDrupal.settings.endpoint+"/":""!=e.endpoint&&(o+=e.endpoint+"/"),o+=e.path;var n=e.method.toUpperCase();jDrupal.settings.debug&&console.log(n+": "+o),r.onreadystatechange=function(){4==r.readyState&&0==r.status&&e.error&&e.error(r,0,"xhr network status problem")},r.onload=function(t){if(4==r.readyState){var a=r.status+" - "+r.statusText;if(200==r.status){jDrupal.settings.debug&&console.log("200 - OK");var s=null,c=r.getResponseHeader("Content-Type");s=c.indexOf("application/json")!=-1?JSON.parse(r.responseText):r.responseText,module_invoke_all("services_request_pre_postprocess_alter",e,s),e.success(s),module_invoke_all("services_request_postprocess_alter",e,s),module_invoke_all("services_postprocess",e,s)}else{if(console.log(n+": "+o+" - "+a),jDrupal.settings.debug&&(in_array(r.status,[403,503])||console.log(r.responseText),console.log(r.getAllResponseHeaders())),"undefined"!=typeof e.error){var i=r.responseText||"";i&&""!=i||(i=a),e.error(r,r.status,i)}module_invoke_all("services_postprocess",e,r)}}else console.log("jDrupal.services.call - request.readyState = "+r.readyState)},services_get_csrf_token({debug:e.debug,success:function(t){var a=!0;"undefined"!=typeof e.async&&e.async===!1&&(a=!1),r.open(n,o,a);var s=null;"POST"==n?(s="application/json","user"==e.service&&"login"==e.resource&&(s="application/x-www-form-urlencoded")):"PUT"==n&&(s="application/json"),e.contentType&&(s=e.contentType),s&&r.setRequestHeader("Content-type",s),t&&r.setRequestHeader("X-CSRF-Token",t),e.timeout&&(r.timeout=e.timeout,e.ontimeout&&(r.ontimeout=e.ontimeout));var c="undefined"!=typeof e.data;if("POST"!=n||c||(e.data=JSON.stringify(""),c=!0),c){if(jDrupal.settings.debug){var i=!0;("user"==e.service&&in_array(e.resource,["login","create","update"])||"file"==e.service&&"create"==e.resource)&&(i=!1),i&&("object"==typeof e.data?console.log(JSON.stringify(e.data)):console.log(e.data))}r.send(e.data)}else r.send(null)},error:function(t,r,o){e.error&&e.error(t,r,o)}})};